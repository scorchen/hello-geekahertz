{% extends "map/baselayout.html" %}


{% block content %}
<div class="starter-template">
    <h1>The Hello Geekahertz Project</h1>

    <p class="lead">The goal of this project is to get as many of our friends (thats you!) as we can to record “hello
        geekahertz” videos around the world.
        We will take care of the rest by organizing these videos and their corresponding locations in an easy to view
        format on this web site.
    </p>


    <div class="panel panel-default" style="width: 100%; margin: auto">
        <div class="panel-heading">
            <h3 class="panel-title">Such Geekahertz, Much Hello</h3>
        </div>
        <div class="panel-body">

            <div id="map-canvas"> </div>


        </div>
    </div>
</div>

{% endblock %}


{% block scripts %}

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA9fe7fwW2cd7dCFqr65ePzn6xOKzJCGCM&sensor=false">
</script>
<script type="text/javascript">
    $(document).ready(function () {
        google.maps.event.addDomListener(window, 'load', initialize);
    });

    function initialize() {
        var mapOptions = {
            center: new google.maps.LatLng(0, 0),
            zoom: 2
        };
        var divMapCanvas = $("#map-canvas")[0];
        var map = new google.maps.Map(divMapCanvas, mapOptions);

        var myLatlng = new google.maps.LatLng(-25.363882, 131.044922);
        var marker = new google.maps.Marker({ position: myLatlng});

        // To add the marker to the map, call setMap();
        //marker.setMap(map);

        {% if returnlist %}
            {% for point in returnlist %}
                myLatlng = new google.maps.LatLng({{point.lat}}, {{point.long}} );
                marker = new google.maps.Marker({ position: myLatlng});


            google.maps.event.addListener(marker, "click", function () {
                bubble = new google.maps.InfoWindow({
                    content: '<iframe title="YouTube video player" class="youtube-player" type="text/html" width="480" height="390" src="http://www.youtube.com/embed/{{ point.vid }}?rel=0" frameborder="0"></iframe>'
                })
                bubble.open(map, marker);
            })
            marker.setMap(map);
            {% endfor %}
            {% else %}
        <p> Something is wrong. </p>
        {% endif %}
    }


</script>
{% endblock %}

